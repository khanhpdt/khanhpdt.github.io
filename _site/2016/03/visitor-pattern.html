<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Software Dev Notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/header.js"></script>
  <script src="/js/toc.js"></script>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/theme.css" rel="stylesheet">
  <link href="/css/syntax.css" rel="stylesheet">
  <link href="/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
</head>

<body>

  

  


 <script type="text/javascript">
  WebFontConfig = {
    google: {
      families: ['Ubuntu::latin']
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Software Dev Notes</a>
      </div>
      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li><a href="/">/home</a></li>
          <li><a href="/archive.html">/archive</a></li>
          <li><a href="/tags.html">/tags</a></li>
          <li><a href="/about.html">/about</a></li>
        </ul>
      </div>
    </div>
  </nav>


<div class="wrapper">
  <div class="content">
    <div class="container container-center">
      <div class="row">
        <div class="col-md-8">
          <div class="article">
            <div class="well">
              <h1><a href="/2016/03/visitor-pattern">Visitor pattern</a></h1>
              <div class="post-meta">
                <div class="post-time">
                  <i class="fa fa-calendar"></i>
                  <time>03 Mar 2016</time>
                </div>
                <ul>
                  
                    <li><a href="/tag/software-engineering">software-engineering</a></li>
                  
                    <li><a href="/tag/design-patterns">design-patterns</a></li>
                  
                </ul>
              </div>
              <div class="post-content">
                <div id="toc" class="toc"></div>
                <h1 id="intent">Intent</h1>

<ul>
  <li>Defines new operations for a class hierarchy <em>without</em> modifying the hierarchy.</li>
</ul>

<h1 id="structure">Structure</h1>

<p><img src="/assets/imgs/patterns/design-patterns/visitor/structure.png" alt="visitor-pattern-structure" /></p>

<ul>
  <li>In the diagram, the <code class="highlighter-rouge">accept(Visitor v)</code> method just simply calls <code class="highlighter-rouge">v.visit(this)</code>, which implements the necessary operation on the given <code class="highlighter-rouge">Component</code>. This is the <em>double dispatch</em> technique, where the result of the call depends on the request and the types of <em>two</em> receivers.</li>
  <li>New operations for the <code class="highlighter-rouge">Component</code> class hierarchy can be created by adding new <code class="highlighter-rouge">Visitor</code>. Thus, itâ€™s not necessary to modify the <code class="highlighter-rouge">Component</code> class hierarchy to define its new operations.</li>
</ul>

<h1 id="applicability">Applicability</h1>

<p>This pattern should be used when:</p>

<ul>
  <li>The class hierarchy rarely changes, while its operations usually does. This is because adding new operations can be simply done by adding new visitors. On the other hand, adding new classes into the hierarchy leads to adding new <code class="highlighter-rouge">visit()</code> method to the <code class="highlighter-rouge">Visitor</code> interface, which leads to modifying <em>all</em> the existing visitors.</li>
</ul>

<h1 id="risk">Risk</h1>

<ul>
  <li>The pattern is quite complicated to understand. Using this pattern might make it hard for other team members to get familiar with the code.</li>
  <li>If this pattern is used with the Composite pattern and the Composite contains a cycle in it, the accept-visit loop might be repeated forever.</li>
</ul>

<h1 id="code-example">Code example</h1>

<ul>
  <li>See <a href="https://github.com/khanhpdt/design-patterns/tree/master/src/main/java/org/khanhpdt/designpatterns/visitor">github/Visitor</a>.</li>
</ul>

<h1 id="reference">Reference</h1>

<ul>
  <li>Visitor, GOF book</li>
  <li>Visitor, Chapter 29, Design Patterns In Java</li>
</ul>

              </div>
              
            </div>
          </div>
        </div>
        <div class="col-md-4 hidden-xs">
          <div class="sidebar ">
  <h2>Recent Posts</h2>
  <ul>
    
    <li><a href="/2016/03/abstract-factory-pattern">Abstract Factory pattern</a></li>
    
    <li><a href="/2016/03/arrays">Arrays</a></li>
    
    <li><a href="/2016/03/algorithms">Algorithms</a></li>
    
    <li><a href="/2016/03/visitor-pattern">Visitor pattern</a></li>
    
    <li><a href="/2016/03/strategy-pattern">Strategy pattern</a></li>
    
  </ul>
</div>

<div class="sidebar">
  <h2>Tags</h2>
  <ul>
    
      <li><a href="/tag/algorithms">algorithms</a></li>
    
      <li><a href="/tag/interview">interview</a></li>
    
      <li><a href="/tag/software-engineering">software-engineering</a></li>
    
      <li><a href="/tag/clean-code">clean-code</a></li>
    
      <li><a href="/tag/principles">principles</a></li>
    
      <li><a href="/tag/http">http</a></li>
    
      <li><a href="/tag/java">java</a></li>
    
      <li><a href="/tag/java8">java8</a></li>
    
      <li><a href="/tag/api-design">api-design</a></li>
    
      <li><a href="/tag/architectures">architectures</a></li>
    
      <li><a href="/tag/java-ee">java-ee</a></li>
    
      <li><a href="/tag/jax-rs">jax-rs</a></li>
    
      <li><a href="/tag/jax-ws">jax-ws</a></li>
    
      <li><a href="/tag/enterprise-patterns">enterprise-patterns</a></li>
    
      <li><a href="/tag/ejb">ejb</a></li>
    
      <li><a href="/tag/security">security</a></li>
    
      <li><a href="/tag/pki">pki</a></li>
    
      <li><a href="/tag/design-patterns">design-patterns</a></li>
    
      <li><a href="/tag/data-structures">data-structures</a></li>
    
  </ul>
</div>

        </div>
      </div>
    </div>
    

  </div>
      <footer class="footer-distributed">
      <div class="container">
        <div class="footer">
          <h6>Follow me</h6>

<ul class="social-media">

  
    <li>
      <a title="khanhpdt on Github" href="https://github.com/khanhpdt" target="_blank"><i class="fa fa-github fa-2x"></i></a>
    </li>
  

  

  

  

  

  

</ul>

          <p>&copy Theme by <a href="http://pavelmakhov.com/jekyll-clean-dark/">Pavel Makhov</a><p>
        </div>
      </div>
    </footer>
  </body>
</html>

</div>
