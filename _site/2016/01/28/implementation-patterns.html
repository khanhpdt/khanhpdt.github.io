<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Implementation Patterns</title>
  <meta name="description" content="  Encapsulated collection (http://martinfowler.com/bliki/EncapsulatedCollection.html)">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="/2016/01/28/implementation-patterns.html">
  <link rel="alternate" type="application/rss+xml" title="Software development notes" href="/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Software development notes</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Implementation Patterns</h1>
    <p class="post-meta"><time datetime="2016-01-28T00:00:00+07:00" itemprop="datePublished">Jan 28, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <ul>
  <li>
    <p>Encapsulated collection (http://martinfowler.com/bliki/EncapsulatedCollection.html)</p>

    <blockquote>
      <p>The key point with this is that you don’t want to give clients direct access to the collection data structure itself - for if you do it allows clients to alter the supplier’s data without the supplier being able to intervene.</p>
    </blockquote>
  </li>
</ul>

<h1 id="book-implementation-patterns-kent-beck">Book: Implementation patterns, Kent Beck</h1>

<h2 id="chapter-7-behavior">Chapter 7: Behavior</h2>
<ul>
  <li>Main flow
    <ul>
      <li>Must be expressed in the clearest way. This does not mean that the minor flows are not important. It just means that the main flow must be the most visible one, so that readers know that it is the main processing of the code and the others are not as important.</li>
      <li>The minor flows should not be written in a way that obscures the main flow. Exceptions and guard clauses can be used for these minor flows. Just remember not to let them get in the way of the main flow.</li>
    </ul>
  </li>
  <li>Messages
    <ul>
      <li>The places where the implementation inside the message receiver can be modified without affecting the sender.</li>
      <li>Due to polymorphism, the message handling may vary at run-time.</li>
    </ul>
  </li>
</ul>

<h2 id="chapter-8-methods">Chapter 8: Methods</h2>
<ul>
  <li>
    <p>Method name should be written from the client’s perspective.</p>
  </li>
  <li>
    <p>Data and logic acting upon the data should be together.</p>
  </li>
  <li>Complete constructor
    <ul>
      <li>If you want to impose required data on an object, introduce a constructor with the required data. The reverse also holds, which means that if a constructor has parameters, then it implies that the parameters are required for the object to function properly.</li>
    </ul>
  </li>
  <li>Factory method
    <ul>
      <li>A (static) method used to create an instance of the class.</li>
      <li>Should be used with care, as it implies that there’s something special inside the method that a simple constructor would not suffice to do.</li>
      <li>For example, factory methods should be used when the name is important, or when the return type is dynamic.</li>
    </ul>
  </li>
  <li>Internal factory
    <ul>
      <li>Should use lazy initialization when the creation is complex. For example:</li>
    </ul>
    <pre><code class="java">
  ComplexObject getComplexObject() {
      if (complexObj == null) {
          complexObj = doComplexComputation();
      }
      return complexObj;
  }
</code></pre>
  </li>
  <li>Collection accessor method
    <ul>
      <li>If you happen to know that a bug can occur at runtime, try to eliminate it. The cost to debug such bug in production is expensive. For example, <code class="highlighter-rouge">Collections.unmodifiableList(List)</code> can cause exception if the clients try to modify the collection.</li>
      <li>Try to reduce the accesses to the collections from the clients. This conforms to the rules “Minimize accessibility, Item 13” and “Minimize mutability, Item 15” in Effective Java.</li>
      <li>Carefully analyze the clients to see if they really need access to the collections. If they just need to perform some simple operations on the collections, then we can just expose only those operations.</li>
    </ul>
  </li>
  <li>Query method
    <ul>
      <li>If an object has a lot of logics dependent on the state of another object, it’s likely that the logics are in a wrong place. This is similar to the smell of Feature Envy in Refactoring book.</li>
    </ul>
  </li>
  <li>Equality method
    <ul>
      <li>equals() and hashCode() should be implemented together and should also operate on the same data. Similar to Item 9 in Effective Java. The reason is that equal objects must have the same hash code.</li>
    </ul>
  </li>
  <li>Safe copy
    <ul>
      <li>Alias problem is when two different objects get control of the same other object without being aware of each other.</li>
      <li>This pattern is only a palliative one, as it does not actually solve the alias problem, which is likely to be a design problem.</li>
    </ul>
  </li>
</ul>

<h2 id="chapter-9-collections">Chapter 9: Collections</h2>
<ul>
  <li>
    <p>Express one of the most fundamental variations in programming, the variation in cardinality (the other variation is in behavior)</p>
  </li>
  <li>Fundamental issues about collections
    <ul>
      <li>Size</li>
      <li>Order</li>
      <li>Uniqueness</li>
      <li>Performance</li>
    </ul>
  </li>
  <li>
    <p>Use the possibly simplest collection implementation first. Later we can change to more specialized implementation if needed.</p>
  </li>
  <li>Some kinds of collections
    <ul>
      <li>Array
        <ul>
          <li>Built-in feature in Java</li>
          <li>Most efficient</li>
          <li>Fixed size</li>
        </ul>
      </li>
      <li>Iterable
        <ul>
          <li>Just to iterate</li>
          <li>Used with foreach loop</li>
        </ul>
      </li>
      <li>Collection
        <ul>
          <li>Simple operations: add, remove, search, count</li>
        </ul>
      </li>
      <li>List
        <ul>
          <li>Orderred items</li>
        </ul>
      </li>
      <li>Set
        <ul>
          <li>No duplicate</li>
        </ul>
      </li>
      <li>SortedSet
        <ul>
          <li>Orderred by a comparator</li>
          <li>No duplicate</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Performance factors on choosing collection type:
    <ul>
      <li>Type of frequent operations</li>
      <li>Collection size</li>
      <li>Profiling (don’t just guess)</li>
    </ul>
  </li>
  <li>Avoid extending collections by inheritance (try to use delegation instead)</li>
</ul>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Software development notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Software development notes</li>
          <li><a href="mailto:tungkhanh.a2@gmail.com">tungkhanh.a2@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/khanhpdt"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">khanhpdt</span></a>

          </li>
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Notes on my daily work as a software developer.</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
